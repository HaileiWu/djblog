{% extends "base.html" %}
{% load helper %}

{% block title %}{{ title|default:"Home"}} - {% endblock %}

{% block content %}
<div class="blog-index">
{% for post in posts.object_list %}
  <article>
    <header>
        <h1 class="entry-title"><a href="{{ post.get_absolute_url }}">{{ post.title }}</a></h1>
        <p class="meta">
      	<time datetime="{{ post.created_at|date:"Y-m-d H:i:s O" }}" pubdate>{{ post.created_at }}</time>
        </p>
		{% if settings.DUOSHUO_NAME %}
        <p class="comment-count"><a href="{{ post.get_absolute_url }}#ds-thread" class="ds-thread-count" data-thread-key="{{ post.id }}"></a></p>
		{% endif %}
    </header>
    <div class="entry-content">{{ post.content|safe }}</div>
    <footer>
      <a rel="full-article" href="{{ post.get_absolute_url }}">Read On</a>
    </footer>
  </article>
{% endfor %}
<nav role="pagination">
  <div>
    {% if posts.has_next %}
      <a class="prev" href="?page={{ posts.next_page_number }}">&larr; Older</a>
    {% endif %}
    <a href="/archives">Blog Archives</a>
    {% if posts.has_previous %}
    <a class="next" href="?page={{ posts.previous_page_number }}">Newer &rarr;</a>
    {% endif %}
  </div>
</nav>
</div>
{% if settings.DUOSHUO_NAME %}
<!-- Duoshuo Comment BEGIN -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"{{ settings.DUOSHUO_NAME }}"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
  </script>
<!-- Duoshuo Comment END -->
{% endif %}
{% endblock %}

{% block sidebar %}
  {% get_recent_posts 5 %}

<section>
  <h1>Recent Comments</h1>
  <ul id="recent_comments" class="ds-recent-comments" data-num-items="5">
  </ul>
</section>

  {% get_top_tags 20 %}
  {% get_links 20 %}
{% endblock %}
